"use strict";define(["jquery"],function(){return{init:function(){var u=location.search.slice(1).split("=")[1];$.get("http://10.31.155.53/SF/php/detail.php",{id:u},function(i){var o="",t="",s="",e="",c="",d="";o+='<h1 title="">'+i.titledetail+"</h1>",t+='<strong class="price">'+i.price+"</strong>",s+='<div class="yj">原价：'+i.yj+"</div>";var n=!0,a=!1,l=void 0;try{for(var r,m=i.urls.split(",")[Symbol.iterator]();!(n=(r=m.next()).done);n=!0){var p=r.value;e+='\n                    <li>\n                        <img title="'+i.titledetail+'" alt="'+i.titledetail+'" src="'+p+'">\n                    </li>'}}catch(i){a=!0,l=i}finally{try{!n&&m.return&&m.return()}finally{if(a)throw l}}function h(){this.pViewdiv=$("#pView"),this.picitemsdiv=$(".pic-items"),this.picitemsul=$(".pic-items ul"),this.picitemsimg=$(".pic-items ul li img"),this.picitemsli=$(".pic-items ul li"),this.szoompicdiv=$("#zoom-jpg"),this.szoompic=$("#zoom-jpg img"),this.szoomdiv=$(".jqZoomLens"),this.bzoomdiv=$(".zoomdiv"),this.bzoomdivimg=$(".bigimg"),this.forward=$("#btn-forward b"),this.bacward=$("#btn-bacward b")}function v(){this.pBtn=$(".pBtn"),this.addcartbox=$("#addcartbox"),this.pClose=$(".pClose"),this.goodsamount=$(".text")}c+='<img alt="'+i.titledetail+'" width="330" height="330" src="'+i.url+'">',d+='<img class="bigimg" src="'+i.url+'">',$(".cm").append(o),$(".priceBox").append(t),$(".pItemsPrice").append(s),$(".pic-items ul").append(e),$("#zoom-jpg").append(c),$(".zoomdiv").append(d),h.prototype.init=function(){this.picshow(),this.arrowdisable(),this.arrow(),this.zoom()},h.prototype.picshow=function(){var o=this;this.picitemsli.on("mouseenter",function(){$(this).children("img").addClass("img-hover").parent().siblings("li").children("img").removeClass("img-hover");var i=$(this).children("img").attr("src");o.szoompic.attr("src",i),o.bzoomdivimg.attr("src",i)})},h.prototype.arrowdisable=function(){this.picitemsli.size()<=5?this.bacward.addClass("disabled"):this.bacward.removeClass("disabled")},h.prototype.arrow=function(){var o=this,t=5;this.bacward.on("click",function(){var i=o.picitemsli.height();t<o.picitemsli.length&&(o.forward.removeClass("disabled"),++t===o.picitemsli.length&&o.bacward.addClass("disabled"),o.picitemsul.animate({top:-(t-5)*i}))}),this.forward.on("click",function(){var i=o.picitemsli.height();5<t&&(o.bacward.removeClass("disabled"),t--,console.log(t),5===t&&o.forward.addClass("disabled"),o.picitemsul.animate({top:-(t-5)*i}))})},h.prototype.zoom=function(){var s=this,e=s.szoompicdiv.width(),c=s.szoompicdiv.height(),i=s.bzoomdiv.width(),o=s.bzoomdiv.height(),t=s.bzoomdivimg.width(),d=s.bzoomdivimg.height(),n=t/e;this.szoompicdiv.on("mouseenter",function(){s.szoomdiv.css({visibility:"visible"}),s.bzoomdiv.css({display:"block"}),s.szoomdiv.css("width",e*i/t),s.szoomdiv.css("height",c*o/d),$(this).on("mousemove",function(i){var o=i.clientX-s.szoompicdiv.offset().left-s.szoomdiv.width()/2,t=i.clientY-s.szoompicdiv.offset().top-s.szoomdiv.height()/2;o<=0?o=0:o>=e-s.szoomdiv.width()&&(o=e-s.szoomdiv.width()),t<=0?t=0:t>=c-s.szoomdiv.height()&&(t=c-s.szoomdiv.height()),s.szoomdiv.css("left",o),s.szoomdiv.css("top",t),s.bzoomdivimg.css("left",-n*o),s.bzoomdivimg.css("top",-n*t)})}),this.szoompicdiv.on("mouseleave",function(){s.szoomdiv.css({visibility:"hidden"}),s.bzoomdiv.css({display:"none"})})},v.prototype.init=function(){this.pBtnonclick()},v.prototype.pBtnonclick=function(){var o=this,t=[],s=[];$.cookie("cookiesid")&&$.cookie("cookieamount")&&(t=$.cookie("cookiesid").split(","),s=$.cookie("cookieamount").split(",")),this.pBtn.on("click",function(){if(o.addcartbox.css({display:"block"}),-1!==t.indexOf(u)){var i=t.indexOf(u);$(s)[i]=parseInt(s[i])+parseInt(goodsamount.value),$.cookie("cookienum",s.toString(),10)}else t.push(u),$.cookie("cookiesid",t.toString(),10),s.push(goodsamount.value),$.cookie("cookienum",s.toString(),10)}),this.pClose.on("click",function(){o.addcartbox.css({display:"none"})})},(new h).init(),(new v).init()},"json")}}});