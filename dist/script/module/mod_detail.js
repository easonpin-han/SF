"use strict";define(["jquery","jqcookie"],function(){return{init:function(){var Z=location.search.slice(1).split("=")[1];$.get("http://10.31.155.53/SF/php/detail.php",{id:Z},function(i){var e=this,t="",o="",s="",n="",l="",a="";t+='<h1 title="">'+i.titledetail+"</h1>",o+='<strong class="price">'+i.price+"</strong>",s+='<div class="yj">原价：'+i.yj+"</div>";var c=!0,r=!1,d=void 0;try{for(var p,h=i.urls.split(",")[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var m=p.value;n+='\n                    <li>\n                        <img title="'+i.titledetail+'" alt="'+i.titledetail+'" src="'+m+'">\n                    </li>'}}catch(i){r=!0,d=i}finally{try{!c&&h.return&&h.return()}finally{if(r)throw d}}l+='<img alt="'+i.titledetail+'" width="330" height="330" src="'+i.url+'">',a+='<img class="bigimg" src="'+i.url+'">',$(".cm").append(t),$(".priceBox").append(o),$(".pItemsPrice").append(s),$(".pic-items ul").append(n),$("#zoom-jpg").append(l),$(".zoomdiv").append(a);$("#pView"),$(".pic-items");var g=$(".pic-items ul"),u=($(".pic-items ul li img"),$(".pic-items ul li")),v=$("#zoom-jpg"),f=$("#zoom-jpg img"),b=$(".jqZoomLens"),k=$(".zoomdiv"),y=$(".bigimg"),w=$("#btn-forward b"),j=$("#btn-bacward b");u.on("mouseenter",function(){$(e).children("img").addClass("img-hover").parent().siblings("li").children("img").removeClass("img-hover");var i=$(e).children("img").attr("src");f.attr("src",i),y.attr("src",i)});console.log(u.size()),u.size()<=5?j.addClass("disabled"):j.removeClass("disabled");var C;C=5,j.on("click",function(){var i=u.height();C<u.length&&(w.removeClass("disabled"),++C===u.length&&j.addClass("disabled"),g.animate({top:-(C-5)*i}))}),w.on("click",function(){var i=u.height();5<C&&(j.removeClass("disabled"),5==--C&&w.addClass("disabled"),g.animate({top:-(C-5)*i}))});var x,z,S,q,I,B,O;x=v.width(),z=v.height(),S=k.width(),q=k.height(),I=y.width(),B=y.height(),O=I/x,v.on("mouseenter",function(){b.css({visibility:"visible"}),k.css({display:"block"}),b.css("width",x*S/I),b.css("height",z*q/B),v.on("mousemove",function(i){var e=i.clientX-v.offset().left-b.width()/2,t=i.clientY-v.offset().top-b.height()/2;e<=0?e=0:e>=x-b.width()&&(e=x-b.width()),t<=0?t=0:t>=z-b.height()&&(t=z-b.height()),b.css("left",e),b.css("top",t),y.css("left",-O*e),y.css("top",-O*t)})}),v.on("mouseleave",function(){b.css({visibility:"hidden"}),k.css({display:"none"})});var F,L,P=$(".pBtn"),V=$("#addcartbox"),X=$(".pClose"),Y=$(".goodsamount");$(".p-add"),$(".p-reduce");F=[],L=[],$.cookie("cookiesid")&&$.cookie("cookieamount")&&(F=$.cookie("cookiesid").split(","),L=$.cookie("cookieamount").split(",")),P.on("click",function(){if(V.css({display:"block"}),-1!==F.indexOf(Z)){var i=F.indexOf(Z);L[i]=parseInt(L[i])+parseInt(Y.val()),$.cookie("cookieamount",L.toString(),{expires:10})}else F.push(Z),$.cookie("cookiesid",F.toString(),{expires:10}),L.push(Y.val()),$.cookie("cookieamount",L.toString(),{expires:10})}),X.on("click",function(){V.css({display:"none"}),Y.val("1")})},"json")}}});